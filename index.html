<!DOCTYPE html>
<html>
<head>
<title>NexusList - Shared Lists</title>
<meta name="viewport" content="width=device-width">
<link rel="icon" href="nexuslist-icon.png">
<link rel="apple-touch-icon" href="nexuslist-icon.png">

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    max-width: 640px;
    margin: 0 auto;
    padding: 24px 16px 40px;
    background: radial-gradient(circle at top left, #e0f2fe, #f9fafb);
  }

  .card {
    background: white;
    border-radius: 18px;
    box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
    padding: 22px 18px 26px;
    border: 1px solid rgba(148, 163, 184, 0.3);
  }

  /* BIG centered logo only */
  .logo-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 8px;
    margin-bottom: 12px;
  }

  .logo-wrapper img {
    height: 160px;
    border-radius: 20px;
  }

  h2 {
    text-align: center;
    color: #0f172a;
    font-size: 20px;
    margin: 0 0 10px;
  }

  .subtitle {
    text-align: center;
    color: #64748b;
    font-size: 13px;
    margin-bottom: 18px;
  }

  .controls-row {
    display: flex;
    gap: 10px;
    margin-bottom: 14px;
    flex-wrap: wrap;
    justify-content: center;   /* keep items centered horizontally */
  }


  #listType {
    padding: 9px 12px;
    border-radius: 999px;
    border: 1px solid #d0d7e2;
    background: #f8fafc;
    font-size: 13px;
    color: #0f172a;
  }

  .input-row {
    display: flex;
    gap: 10px;
    margin-bottom: 10px;
  }

  input#itemInput {
    flex: 1;
    padding: 12px 14px;
    border: 1px solid #cbd5f5;
    border-radius: 999px;
    font-size: 14px;
    outline: none;
    background: #f9fafb;
  }

  input#itemInput:focus {
    border-color: #4f46e5;
    box-shadow: 0 0 0 1px rgba(79,70,229,0.25);
    background: #ffffff;
  }

  button {
    padding: 10px 18px;
    background: linear-gradient(135deg, #4f46e5, #22c55e);
    color: white;
    border: none;
    border-radius: 999px;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.02em;
    transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.15s;
    white-space: nowrap;
  }

  button:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(15,23,42,0.25);
  }

  button:active {
    transform: translateY(0);
    box-shadow: none;
    opacity: 0.9;
  }

  .check-btn {
    background: #e5f6ff;
    color: #0369a1;
  }

  .check-btn.checked {
    background: #dcfce7;
    color: #166534;
  }

  .delete-btn {
    background: #fee2e2;
    color: #b91c1c;
  }

  ul {
    list-style: none;
    padding: 0;
    margin-top: 8px;
  }

  li {
    padding: 10px 12px;
    background: #f9fafb;
    margin: 8px 0;
    border-radius: 12px;
    box-shadow: 0 8px 18px rgba(15, 23, 42, 0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 8px;
  }

  li span {
    flex: 1;
    font-size: 14px;
    color: #0f172a;
  }

  .done {
    text-decoration: line-through;
    opacity: 0.6;
  }

  .item-buttons {
    display: flex;
    gap: 6px;
  }
</style>


<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-database-compat.js"></script>
</head>

<body>
  <div class="card">
    <!-- Logo only, centered -->
    <div class="logo-wrapper">
      <img src="nexuslist-icon.png" alt="NexusList logo">
    </div>

    <h2>What kind of list do you want to make?</h2>
    <div class="subtitle">Switch between shopping, reminders and packing lists in one place.</div>
    
<div class="controls-row">
  <select id="listType" onchange="changeListType()">
    <option value="shopping">Shopping</option>
    <option value="reminder">Reminder</option>
    <option value="todo">To-do list</option>
    <option value="__new__">+ New list type…</option>
  </select>
</div>

    <div class="input-row">
      <input id="itemInput" placeholder="Add item...">
      <button onclick="addItem()">Add</button>
    </div>

    <ul id="list"></ul>
  </div>



<script>
const firebaseConfig = {
  apiKey: "AIzaSyA9VVZ6Cj-2zm52FZyEI_kpg3J9LKFpTPY",
  authDomain: "nexuslist-380ff.firebaseapp.com",
  databaseURL: "https://nexuslist-380ff-default-rtdb.firebaseio.com",
  projectId: "nexuslist-380ff",
  storageBucket: "nexuslist-380ff.firebasestorage.app",
  messagingSenderId: "950145923798",
  appId: "1:950145923798:web:050a4a08f99cae13e72777",
  measurementId: "G-8X3506GVGQ"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// reference for list types
const listTypesRef = db.ref('nexuslist/listTypes');

let currentType = 'shopping';
let listRef = db.ref('nexuslist/' + currentType);

// ---------- LIST TYPES ----------

// load saved custom list types from Firebase on start
function loadListTypes() {
  const select = document.getElementById('listType');

  // keep the last option ("+ New list type…") for later
  const newOption = document.querySelector('#listType option[value="__new__"]');

  // remove all options except defaults and "+ new..."
  select.innerHTML = `
    <option value="shopping">Shopping</option>
    <option value="reminder">Reminder</option>
    <option value="todo">To-do list</option>
  `;
  select.appendChild(newOption);

  listTypesRef.once('value', snap => {
    const data = snap.val();
    if (!data) return;

    Object.values(data).forEach(t => {
      // t.key = firebase-safe key, t.label = nice label
      const opt = document.createElement('option');
      opt.value = t.key;
      opt.textContent = t.label;
      // insert before "+ New list type…"
      select.insertBefore(opt, select.lastElementChild);
    });

    // ensure currentType is selected
    select.value = currentType;
  });
}

// handle changing list type or creating a new one
function changeListType() {
  const select = document.getElementById('listType');
  let value = select.value;

  // If user chose "+ New list type…"
  if (value === '__new__') {
    const name = prompt('What do you want to call this list? (e.g. Christmas gifts)');
    if (!name || !name.trim()) {
      // user cancelled → go back to previous type
      select.value = currentType;
      return;
    }

    const label = name.trim();
    // sanitize name for Firebase path (no spaces)
    const key = label.toLowerCase().replace(/\s+/g, '-'); // "Christmas gifts" -> "christmas-gifts"

    value = key;

    // save this new list type in Firebase so it survives refresh
    const newTypeRef = listTypesRef.push();
    newTypeRef.set({ key, label });

    // add it as a new option in the dropdown (before "+ New list type…")
    const opt = document.createElement('option');
    opt.value = key;
    opt.textContent = label;
    select.insertBefore(opt, select.lastElementChild);
    select.value = key;
  }

  currentType = value;
  listRef = db.ref('nexuslist/' + currentType);

  // clear current list in UI
  document.getElementById('list').innerHTML = '';

  // detach old listeners, then attach new ones
  listRef.off();
  attachListeners();
}

// ---------- ITEMS (ADD / CHECK / DELETE) ----------

// add new item
function addItem() {
  const input = document.getElementById('itemInput');
  if (input.value.trim()) {
    listRef.push({ text: input.value.trim(), done: false });
    input.value = '';
  }
}

// attach listeners for current list type
function attachListeners() {
  // when item added
  listRef.on('child_added', snap => {
    createListItemElement(snap.key, snap.val());
  });

  // when item changed (check / uncheck)
  listRef.on('child_changed', snap => {
    const li = document.getElementById('item-' + snap.key);
    if (!li) return;
    const span = li.querySelector('span');
    const checkBtn = li.querySelector('.check-btn');

    span.textContent = snap.val().text;
    span.classList.toggle('done', snap.val().done);
    checkBtn.textContent = snap.val().done ? 'Uncheck' : 'Check';
    checkBtn.classList.toggle('checked', snap.val().done);
  });

  // when item deleted
  listRef.on('child_removed', snap => {
    const li = document.getElementById('item-' + snap.key);
    if (li && li.parentNode) {
      li.parentNode.removeChild(li); // remove instantly from page
    }
  });
}

// create <li> in DOM
function createListItemElement(key, data) {
  const li = document.createElement('li');
  li.id = 'item-' + key;

  const span = document.createElement('span');
  span.textContent = data.text;
  if (data.done) span.classList.add('done');

  const checkBtn = document.createElement('button');
  checkBtn.className = 'check-btn' + (data.done ? ' checked' : '');
  checkBtn.textContent = data.done ? 'Uncheck' : 'Check';
  checkBtn.onclick = () => toggle(key);

  const delBtn = document.createElement('button');
  delBtn.className = 'delete-btn';
  delBtn.textContent = 'Delete';
  delBtn.onclick = () => listRef.child(key).remove();

  const btnWrapper = document.createElement('div');
  btnWrapper.className = 'item-buttons';
  btnWrapper.appendChild(checkBtn);
  btnWrapper.appendChild(delBtn);

  li.appendChild(span);
  li.appendChild(btnWrapper);

  document.getElementById('list').appendChild(li);
}

// toggle between checked/unchecked
function toggle(key) {
  const item = listRef.child(key);
  item.once('value', snap => {
    const current = snap.val();
    item.update({ done: !current.done });
  });
}

// allow pressing Enter to add item
document.getElementById('itemInput').addEventListener('keyup', function (e) {
  if (e.key === 'Enter') {
    addItem();
  }
});

// initial load
loadListTypes();
attachListeners();
</script>


</body>
</html>








